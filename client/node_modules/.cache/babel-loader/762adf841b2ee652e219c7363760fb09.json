{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\julie\\\\Desktop\\\\Rice Class\\\\shop-shop\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\julie\\\\Desktop\\\\Rice Class\\\\shop-shop\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from\"react\";import{Link}from\"react-router-dom\";import{pluralize}from\"../../utils/helpers\";import{useStoreContext}from\"../../utils/GlobalState\";import{ADD_TO_CART,UPDATE_CART_QUANTITY}from\"../../utils/actions\";import{idbPromise}from\"../../utils/helpers\";function ProductItem(item){var image=item.image,name=item.name,_id=item._id,price=item.price,quantity=item.quantity;var _useStoreContext=useStoreContext(),_useStoreContext2=_slicedToArray(_useStoreContext,2),state=_useStoreContext2[0],dispatch=_useStoreContext2[1];var cart=state.cart;var addToCart=function addToCart(){var itemInCart=cart.find(function(cartItem){return cartItem._id===_id;});if(itemInCart){dispatch({type:UPDATE_CART_QUANTITY,_id:_id,purchaseQuantity:parseInt(itemInCart.purchaseQuantity)+1});idbPromise(\"cart\",\"put\",_objectSpread(_objectSpread({},itemInCart),{},{purchaseQuantity:parseInt(itemInCart.purchaseQuantity)+1}));}else{dispatch({type:ADD_TO_CART,product:_objectSpread(_objectSpread({},item),{},{purchaseQuantity:1})});idbPromise(\"cart\",\"put\",_objectSpread(_objectSpread({},item),{},{purchaseQuantity:1}));}};return/*#__PURE__*/React.createElement(\"div\",{className:\"card px-1 py-1\"},/*#__PURE__*/React.createElement(Link,{to:\"/products/\".concat(_id)},/*#__PURE__*/React.createElement(\"img\",{alt:name,src:\"/images/\".concat(image)}),/*#__PURE__*/React.createElement(\"p\",null,name)),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,quantity,\" \",pluralize(\"item\",quantity),\" in stock\"),/*#__PURE__*/React.createElement(\"span\",null,\"$\",price)),/*#__PURE__*/React.createElement(\"button\",{onClick:addToCart},\"Add to cart\"));}export default ProductItem;","map":{"version":3,"sources":["C:/Users/julie/Desktop/Rice Class/shop-shop/client/src/components/ProductItem/index.js"],"names":["React","Link","pluralize","useStoreContext","ADD_TO_CART","UPDATE_CART_QUANTITY","idbPromise","ProductItem","item","image","name","_id","price","quantity","state","dispatch","cart","addToCart","itemInCart","find","cartItem","type","purchaseQuantity","parseInt","product"],"mappings":"uWAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,SAAT,KAA0B,qBAA1B,CACA,OAASC,eAAT,KAAgC,yBAAhC,CACA,OAASC,WAAT,CAAsBC,oBAAtB,KAAkD,qBAAlD,CACA,OAASC,UAAT,KAA2B,qBAA3B,CAEA,QAASC,CAAAA,WAAT,CAAqBC,IAArB,CAA2B,CACzB,GACEC,CAAAA,KADF,CAMID,IANJ,CACEC,KADF,CAEEC,IAFF,CAMIF,IANJ,CAEEE,IAFF,CAGEC,GAHF,CAMIH,IANJ,CAGEG,GAHF,CAIEC,KAJF,CAMIJ,IANJ,CAIEI,KAJF,CAKEC,QALF,CAMIL,IANJ,CAKEK,QALF,CAQA,qBAA0BV,eAAe,EAAzC,sDAAOW,KAAP,sBAAcC,QAAd,sBAED,GAAQC,CAAAA,IAAR,CAAiBF,KAAjB,CAAQE,IAAR,CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACtB,GAAMC,CAAAA,UAAU,CAAGF,IAAI,CAACG,IAAL,CAAU,SAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACT,GAAT,GAAiBA,GAA/B,EAAV,CAAnB,CACA,GAAIO,UAAJ,CAAgB,CACdH,QAAQ,CAAC,CACPM,IAAI,CAAEhB,oBADC,CAEPM,GAAG,CAAEA,GAFE,CAGPW,gBAAgB,CAAEC,QAAQ,CAACL,UAAU,CAACI,gBAAZ,CAAR,CAAwC,CAHnD,CAAD,CAAR,CAKAhB,UAAU,CAAC,MAAD,CAAS,KAAT,gCACLY,UADK,MAERI,gBAAgB,CAAEC,QAAQ,CAACL,UAAU,CAACI,gBAAZ,CAAR,CAAwC,CAFlD,GAAV,CAID,CAVD,IAUO,CACLP,QAAQ,CAAC,CACPM,IAAI,CAAEjB,WADC,CAEPoB,OAAO,gCAAOhB,IAAP,MAAac,gBAAgB,CAAE,CAA/B,EAFA,CAAD,CAAR,CAIAhB,UAAU,CAAC,MAAD,CAAS,KAAT,gCAAqBE,IAArB,MAA2Bc,gBAAgB,CAAE,CAA7C,GAAV,CACD,CACF,CAnBD,CAqBC,mBACE,2BAAK,SAAS,CAAC,gBAAf,eACE,oBAAC,IAAD,EAAM,EAAE,qBAAeX,GAAf,CAAR,eACE,2BAAK,GAAG,CAAED,IAAV,CAAgB,GAAG,mBAAaD,KAAb,CAAnB,EADF,cAEE,6BAAIC,IAAJ,CAFF,CADF,cAKE,4CACE,+BACGG,QADH,KACcX,SAAS,CAAC,MAAD,CAASW,QAAT,CADvB,aADF,cAIE,oCAAQD,KAAR,CAJF,CALF,cAWE,8BAAQ,OAAO,CAAEK,SAAjB,gBAXF,CADF,CAeD,CAED,cAAeV,CAAAA,WAAf","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { pluralize } from \"../../utils/helpers\"\nimport { useStoreContext } from \"../../utils/GlobalState\";\nimport { ADD_TO_CART, UPDATE_CART_QUANTITY } from \"../../utils/actions\";\nimport { idbPromise } from \"../../utils/helpers\";\n\nfunction ProductItem(item) {\n  const {\n    image,\n    name,\n    _id,\n    price,\n    quantity\n  } = item;\n  \n  const [state, dispatch] = useStoreContext();\n\n const { cart } = state;\n\n const addToCart = () => {\n   const itemInCart = cart.find((cartItem) => cartItem._id === _id);\n   if (itemInCart) {\n     dispatch({\n       type: UPDATE_CART_QUANTITY,\n       _id: _id,\n       purchaseQuantity: parseInt(itemInCart.purchaseQuantity) + 1,\n     });\n     idbPromise(\"cart\", \"put\", {\n       ...itemInCart,\n       purchaseQuantity: parseInt(itemInCart.purchaseQuantity) + 1,\n     });\n   } else {\n     dispatch({\n       type: ADD_TO_CART,\n       product: { ...item, purchaseQuantity: 1 },\n     });\n     idbPromise(\"cart\", \"put\", { ...item, purchaseQuantity: 1 });\n   }\n };\n\n  return (\n    <div className=\"card px-1 py-1\">\n      <Link to={`/products/${_id}`}>\n        <img alt={name} src={`/images/${image}`} />\n        <p>{name}</p>\n      </Link>\n      <div>\n        <div>\n          {quantity} {pluralize(\"item\", quantity)} in stock\n        </div>\n        <span>${price}</span>\n      </div>\n      <button onClick={addToCart}>Add to cart</button>\n    </div>\n  );\n}\n\nexport default ProductItem;\n"]},"metadata":{},"sourceType":"module"}